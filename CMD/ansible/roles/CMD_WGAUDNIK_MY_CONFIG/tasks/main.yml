# ---> Don't change this file manually <---
- name: GIT USER EMAIL AND NAME
  become: 'no'
  git_config:
    name: '{{ item.name }}'
    scope: '{{ item.scope }}'
    value: '{{ item.value }}'
  with_items:
    - {name: 'user.email', scope: 'global', value: 'wojciech.gaudnik@gmail.com'}
    - {name: 'user.name', scope: 'global', value: 'Wojciech Gaudnik'}
- name: GIT PULL MY CONFIG REPO
  become: 'no'
  git:
    repo: 'git@github.com:wojciechGaudnik/my-config.git'
    dest: '~/.my-config'
    version: master
  register: reg_wgaudnik_git_pull_config_repo
- name: GIT PULL REPOS
  become: 'no'
  git:
    repo: '{{ item.repo }}'
    dest: '{{ item.dest }}'
    force: '{{ item.force }}'
    version: master
  with_items:
    - {repo: 'https://github.com/robbyrussell/oh-my-zsh', dest: '~/.oh-my-zsh', force: 'yes'}
    - {repo: 'https://github.com/romkatv/powerlevel10k.git', dest: '~/.oh-my-zsh/custom/themes/powerlevel10k', force: 'yes'}
    - {repo: 'https://github.com/zsh-users/zsh-autosuggestions', dest: '~/.oh-my-zsh/custom/plugins/zsh-autosuggestions', force: 'yes'}
    - {repo: 'https://github.com/zsh-users/zsh-syntax-highlighting.git', dest: '~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting', force: 'yes'}
    - {repo: 'https://github.com/tmux-plugins/tpm', dest: '~/.tmux/plugins/tpm', force: 'yes'}
- name: CREATE DIR
  become: 'no'
  file:
    path='{{ item.path }}'
    state='{{ item.state }}'
    recurse='{{ item.recurse }}'
  with_items:
    - {path: '~/.config/mc', state: 'directory', recurse: 'yes'}
    - {path: '~/.config/htop', state: 'directory', recurse: 'yes'}
    - {path: '~/.vim/colors', state: 'directory', recurse: 'yes'}
    - {path: '~/.vim/undodir', state: 'directory', recurse: 'yes'}
    - {path: '~/.vim/spell', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/NAS_Backups', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/NAS_Important', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/NAS_Plex', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/NAS_Storage', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/NAS_VirtualBox', state: 'directory', recurse: 'yes'}
    - {path: '/mnt/usb', state: 'directory', recurse: 'yes'}
- name: ZSH LINK FILES
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  file:
    src='{{ item.src }}'
    dest='{{ item.dest }}'
    state='{{ item.state }}'
    force='{{ item.force }}'
  with_items:
    - {src: '~/.my-config/CMD/config/.zshrc', dest: '~/.zshrc', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/.p10k.zsh', dest: '~/.p10k.zsh', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/.usefullCommands.txt', dest: '~/.usefullCommands.txt', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/htoprc', dest: '~/.config/htop/htoprc', state: 'link', force: 'yes'}
- name: VIM LINK FILES
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  file:
    src='{{ item.src }}'
    dest='{{ item.dest }}'
    state='{{ item.state }}'
    force='{{ item.force }}'
  with_items:
    - {src: '~/.my-config/CMD/config/.vimrc', dest: '~/.vimrc', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/.vim/colors/green_dark.vim', dest: '~/.vim/colors/green_dark.vim', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/.vim/spell/en.utf-8.add', dest: '~/.vim/spell/en.utf-8.add', state: 'link', force: 'yes'}
    - {src: '~/.my-config/CMD/config/.vim/spell/en.utf-8.add.spl', dest: '~/.vim/spell/en.utf-8.add.spl', state: 'link', force: 'yes'}
- name: VIM INSTALL/UPDATE PLUGINS
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  expect:
    timeout: 60
    echo: 'yes'
    command: vim +PlugUpdate +qall
    responses:
      .*ENTER.*: ""
- name: VIM CLEAN PLUGINS
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  shell: vim +PlugClean! +qall
- name: TMUX LINK FILES
  become: 'no'
  file:
    src='{{ item.src }}'
    dest='{{ item.dest }}'
    state='{{ item.state }}'
    force='{{ item.force }}'
  with_items:
    - {src: '~/.my-config/CMD/config/.tmux.conf', dest: '~/.tmux.conf', state: 'link', force: 'yes'}
- name: TMUX INSTALL PLUGINS
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  shell: tmux start-server && ~/.tmux/plugins/tpm/scripts/install_plugins.sh
- name: TMUX UPDATE PLUGINS
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  shell: tmux start-server && ~/.tmux/plugins/tpm/scripts/update_plugin.sh
- name: TMUX CLEAN PLUGINS
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  shell: tmux start-server && ~/.tmux/plugins/tpm/scripts/clean_plugins.sh
- name: MC COPY FILES
  become: 'no'
  when: reg_wgaudnik_git_pull_config_repo.changed
  copy:
    src='{{ item.src }}'
    dest='{{ item.dest }}'
    remote_src='{{ item.remote_src }}'
    mode='{{ item.mode }}'
  with_items:
    - {src: '~/.my-config/CMD/config/mc/ini', dest: '~/.config/mc/ini', remote_src: 'yes', mode: '0644' }
    - {src: '~/.my-config/CMD/config/mc/panels.ini', dest: '~/.config/mc/panels.ini', remote_src: 'yes', mode: '0644' }
- name: AUTO JUMP GREEN
  import_tasks: auto_jump_green.yml
